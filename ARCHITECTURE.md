# Архитектура плагина MoralClaims

**Автор:** bUmmy1337  
**Сайт:** https://catshade.ru

## Структура проекта

```
src/main/java/ru/moralclaims/
├── MoralClaimsPlugin.java          # Главный класс плагина
├── commands/
│   ├── ClaimCommand.java           # Команды для работы с приватами
│   └── TelegramCommand.java        # Команда привязки Telegram
├── listeners/
│   └── ClaimProtectionListener.java # Обработка событий защиты
├── managers/
│   ├── ClaimManager.java           # Управление приватами
│   ├── ConfigManager.java          # Управление конфигурацией
│   ├── HologramManager.java        # Управление голограммами
│   └── TelegramManager.java        # Управление Telegram ботом
└── models/
    └── Claim.java                  # Модель привата
```

## Основные компоненты

### MoralClaimsPlugin
- Главный класс плагина
- Инициализирует все менеджеры
- Регистрирует команды и слушатели событий

### ClaimManager
- Создание, удаление и поиск приватов
- Сохранение/загрузка данных в JSON формате
- Проверка пересечений приватов

### HologramManager
- Создание голограмм с сообщениями
- Автоматическое удаление через заданное время
- Использует ArmorStand для отображения

### TelegramManager
- Встроенный Telegram бот
- Система привязки через коды
- Отправка уведомлений

### ClaimProtectionListener
- Перехват событий строительства/ломания/взаимодействия
- Показ голограмм при нарушениях
- Отправка уведомлений

## Особенности реализации

### Система приватов
- Круглые ��риваты с центром и радиусом
- Проверка пересечений при создании
- Лимиты на количество приватов на игрока

### Голограммы
- Используют невидимые ArmorStand
- Рандомные сообщения из конфига
- Автоматическое удаление

### Telegram интеграция
- Бот работает на том же сервере
- Привязка через временные коды
- Асинхронная отправка уведомлений

### Хранение данных
- JSON файлы для приватов и привязок Telegram
- Автоматическое создание папок
- Обработка ошибок при чтении/записи

## Зависимости

- **Paper API 1.21.4** - основной API сервера
- **Telegram Bots API 6.8.0** - для работы с Telegram
- **Jackson 2.15.2** - для работы с JSON

Все зависимости включены в итоговый JAR файл.